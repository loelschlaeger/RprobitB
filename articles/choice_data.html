<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="RprobitB">
<title>Choice data • RprobitB</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.1.0/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.1.0/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Choice data">
<meta property="og:description" content="RprobitB">
<meta property="og:image" content="https://loelschlaeger.github.io/RprobitB/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">RprobitB</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.0.9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-2">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/choice_data.html">Choice data</a>
    <a class="dropdown-item" href="../articles/data_management.html">Data management</a>
    <a class="dropdown-item" href="../articles/introduction_to_RprobitB_and_model_formulation.html">Introduction to RprobitB and model formulation</a>
    <a class="dropdown-item" href="../articles/model_fitting.html">Model fitting</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav"></ul>
</div>

    
  </div>
</nav><div class="container template-article">
<script src="choice_data_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <main id="main"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Choice data</h1>
                        <h4 data-toc-skip class="author">Lennart Oelschläger</h4>
            
            <h4 data-toc-skip class="date">2021-12-02</h4>
      
      
      <div class="d-none name"><code>choice_data.Rmd</code></div>
    </div>

    
    
<p>This vignette explains how to handle choice data in RprobitB. We use the <a href="https://cran.r-project.org/package=mlogit" class="external-link">Train dataset from the mlogit package</a> for illustration.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">RprobitB</span><span class="op">)</span>
<span class="co">#&gt; Thanks for using RprobitB 1.0.0.9000, happy choice modeling!</span>
<span class="co">#&gt; See https://loelschlaeger.github.io/RprobitB for help.</span>
<span class="co">#&gt; Type 'citation("RprobitB")' for citing this R package.</span></code></pre></div>
<div class="section level2">
<h2 id="characteristics-and-requirements-of-choice-data">Characteristics and requirements of choice data<a class="anchor" aria-label="anchor" href="#characteristics-and-requirements-of-choice-data"></a>
</h2>
<p>Choice data basically consists of</p>
<ol style="list-style-type: decimal">
<li><p>an identifier for each decider and optionally for each choice situation (which is only relevant in the panel context),</p></li>
<li><p>the choices in each choice situation,</p></li>
<li><p>alternative and decider specific covariates for each choice situation.</p></li>
</ol>
<p>Therefore, RprobitB requests the following requirements to provided choice data:</p>
<ol style="list-style-type: decimal">
<li><p>It must be a data frame.</p></li>
<li><p>It must be in “wide” format, i.e. each row represents one choice occasion.</p></li>
<li><p>It must contain a column with unique identifier for each decision maker.</p></li>
<li><p>It can contain a column with identifier for each choice situation, which must be unique given the decider. If this information is missing, these identifier are generated by the appearence of the columns in the data set.</p></li>
<li><p>It can contain a column with the observed choices. Such a column is required for model fitting but not for prediction.</p></li>
<li><p>It must contain columns for the values of each alternative specific covariate for each alternative and for each decider specific covariate.</p></li>
</ol>
<p>We can check that the Train dataset fulfills these requirements:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"Train"</span>, package <span class="op">=</span> <span class="st">"mlogit"</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">Train</span><span class="op">)</span>
<span class="co">#&gt; 'data.frame':    2929 obs. of  11 variables:</span>
<span class="co">#&gt;  $ id       : int  1 1 1 1 1 1 1 1 1 1 ...</span>
<span class="co">#&gt;  $ choiceid : int  1 2 3 4 5 6 7 8 9 10 ...</span>
<span class="co">#&gt;  $ choice   : Factor w/ 2 levels "A","B": 1 1 1 2 2 2 2 2 1 1 ...</span>
<span class="co">#&gt;  $ price_A  : num  2400 2400 2400 4000 2400 4000 2400 2400 4000 2400 ...</span>
<span class="co">#&gt;  $ time_A   : num  150 150 115 130 150 115 150 115 115 150 ...</span>
<span class="co">#&gt;  $ change_A : num  0 0 0 0 0 0 0 0 0 0 ...</span>
<span class="co">#&gt;  $ comfort_A: num  1 1 1 1 1 0 1 1 0 1 ...</span>
<span class="co">#&gt;  $ price_B  : num  4000 3200 4000 3200 3200 2400 3200 3200 3200 4000 ...</span>
<span class="co">#&gt;  $ time_B   : num  150 130 115 150 150 130 115 150 130 115 ...</span>
<span class="co">#&gt;  $ change_B : num  0 0 0 0 0 0 0 0 0 0 ...</span>
<span class="co">#&gt;  $ comfort_B: num  1 1 0 0 0 0 1 0 1 0 ...</span></code></pre></div>
<p>It is a data frame, each row represents one choice occasion, the columns <code>id</code> and <code>choiceid</code> identify the deciders and the choice occasions, respectively. The column <code>choice</code> gives the observed choices. We see four alternative-specific covariates, namely <code>price</code>, <code>time</code>, <code>change</code> and <code>comfort</code>. There values are given for each alternative.</p>
</div>
<div class="section level2">
<h2 id="specify-the-model-formula">Specify the model formula<a class="anchor" aria-label="anchor" href="#specify-the-model-formula"></a>
</h2>
<p>We have to tell RprobitB which covariates we want to include in our model. This is done by specifying a <code>formula</code> object.</p>
</div>
<div class="section level2">
<h2 id="the-prepare_data-function-in-rprobitb">The <code>prepare_data()</code> function in RprobitB<a class="anchor" aria-label="anchor" href="#the-prepare_data-function-in-rprobitb"></a>
</h2>
</div>
<div class="section level2">
<h2 id="simulate-choice-data-in-rprobitb-using-the-simulate_choices-function">Simulate choice data in RprobitB using the <code>simulate_choices()</code> function<a class="anchor" aria-label="anchor" href="#simulate-choice-data-in-rprobitb-using-the-simulate_choices-function"></a>
</h2>
</div>
<div class="section level2">
<h2 id="standardize-covariates">Standardize covariates<a class="anchor" aria-label="anchor" href="#standardize-covariates"></a>
</h2>
</div>
<div class="section level2">
<h2 id="summarizes-data">Summarizes data<a class="anchor" aria-label="anchor" href="#summarizes-data"></a>
</h2>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by <a href="https://www.oilbat.de" class="external-link">Lennart Oelschläger</a>, Dietmar Bauer.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.0.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
